#:import md_icons kivymd.icon_definitions.md_icons
#:import hex2rgb kivy.utils.get_color_from_hex
#:set white 1,1,1,1
#:set gray app.gray


<Toolbar>:
	increment: 1.5 * self.theme_cls.standard_increment
	size_hint_y: None
	height:  root.increment
	elevation:25

	canvas.before:
		Rectangle:
			pos: self.pos
			size: self.size
			source: f"assets/images/bg/bg_toolbar.png"
<Appbar>:
	increment:self.theme_cls.standard_increment
	size_hint_y: None
	height:  root.increment
	elevation:25

	canvas.before:
		Rectangle:
			pos: self.pos
			size: self.size
<CarouselItem>
	MDRelativeLayout:
		size_hint_y: .4
		size_hint_x: 0.98
		pos_hint: {'center_x': .5,"center_y":.6}
		
		MDCard:
			radius: [5,5,5,5]
			elevation:5
			shadow_pos:[2.5,2.5]
			
			MDBoxLayout:
				orientation: 'vertical'
				pos_hint: {'center_x': .5}
				padding: 20,5,20,20
				spacing: 5
				
				MDBoxLayout:
					size_hint_y: .2
					md_bg_color: white
					padding: "8dp"
					
					OneLineRightIconListItem:
						pos_hint: {'center_y': .5}
						font_style:'Subtitle2'
						text: f"[i]{root.name_product}[i]"
						divider: None
						_no_ripple_effect: True

				FitImage:
					radius: [5,5,5,5]
					source: root.source
					pos_hint: {'center_x': .5}

<CarouselContainer>
	MDList:
		pos_hint: {'top': .87}
		
		OneLineRightIconListItem:
			pos_hint: {'center_y': .5}
			font_style:'H5'
			text: f"[i]Products[i]"
			divider: None
			_no_ripple_effect: True
			
	
	MDCarousel:
		pos_hint: {'top': .98}
		id:product_carousel
		loop:True
	
	MDSeparator:
		pos_hint: {'top': .36}
        height: "1dp"
        color: gray

<ChartContainer>
	MDList:
		pos_hint: {'top': 1}
		
		OneLineRightIconListItem:
			pos_hint: {'center_y': .5}
			font_style:'H5'
			text: f"[i]Outcome[i]"
			divider: None
			_no_ripple_effect: True
			
			IconRightWidget:
				icon: "arrow-right"
				_no_ripple_effect: True
				user_font_size:18
	
	MDBoxLayout:
		id: chart_box
		orientation: 'vertical'
		pos_hint: {'center_y': .5}
	
<CustomImageIconButton>
    
    font_style: "Icon"
    text: u"{}".format(md_icons[self.icon]) if self.icon in md_icons else ""
    
    font_size: root.user_font_size if root.user_font_size else self.font_size
    
    halign:'center'
    size_hint: None, None
    size: (dp(56), dp(56))
    pos_hint: {"center_x": .5, "center_y": .5}
    canvas.before:
        Ellipse:
            source: self.source
            pos: self.pos
            size: self.size

<CustomIconFlatButton>
	width: label_txt.texture_size[0]
	height: 39
    padding: (dp(12), dp(12))
    markup: False
    FloatLayout:
        id: item_container
        MDIcon:
            id: label_txt_icon
            icon: root.icon
            size_hint_x: None
            text_size: (None, root.height)
            height: self.texture_size[1]
            theme_text_color: 'Custom'
            valign: 'middle'
            halign: 'center'
            text_color:
                (root.theme_cls.primary_color if not root.text_color else root.text_color) \
                if not root.disabled else root.theme_cls.disabled_hint_text_color
            opposite_colors: root.opposite_colors
            pos: [self.pos[0], self.pos[1]]
            font_size: dp(26)
            pos_hint: {'center_x': .5, 'center_y': .7}

        MDLabel:
            id: label_txt
            text: root.text
            font_style: 'Caption'
            size_hint_x: None
            text_size: (None, root.height)
            height: self.texture_size[1]
            theme_text_color: 'Custom'
            valign: 'bottom'
            halign: 'center'
            opposite_colors: root.opposite_colors
            font_size: dp(18)
            pos_hint: {'center_x': .5, 'center_y': .5}
            markup: root.markup




MDNavigationLayout:
	ScreenManager:
		id: screens
		
		MDScreen:
			id: product_carousel_screen
			name: 'product_carousel_screen'

			MDFloatLayout:

				Toolbar:
					pos_hint: {'top': 1}
					id: toolbar

					MDLabel:
						id: title
						text: "Saravana Enterprises"
						pos_hint: {'center_x': .65,"center_y": .5}
				        font_style: "H5"
						theme_text_color: "Custom"
						text_color: white

					MDIconButton:
				        id:mag
						pos_hint: {"right": .975,"center_y": .5}
				        theme_text_color: "Custom"
				        text_color: white
				        user_font_size:18
				        icon: 'magnify'

    			CarouselContainer:
    				id:carousel_container

				ChartContainer:
					size_hint_y: .25
					pos_hint: {'top': .35}
					id:chart_container
					on_release:print('in chart container')

				Appbar:
					pos_hint: {'bottom': 1}
					id: bottom_toolbar
					increment: self.theme_cls.standard_increment
					size_hint_y: None
					height: self.increment
					
					CustomImageIconButton:
						theme_text_color: "Custom"
				        text_color: white
				        user_font_size:18
					    icon:'plus'
					    source:f"assets/images/bg/bg_toolbar.png"
					    on_release:product_carousel_screen.export_to_png('ss.png')

					MDSeparator:
						pos_hint: {'top':1}
				        height: "1dp"
				        color: gray

				    CustomIconFlatButton:
				    	pos_hint: {'center_y': .5,'center_x':.2}
				    	markup:True
				    	icon:'cart-outline'
				    	text_color: hex2rgb('#10566B')
    					text: "[b][i][color=#10566B]ORDERS[/color][i][b]"

    				CustomIconFlatButton:
				    	pos_hint: {'center_y': .5,'center_x':.8}
				    	markup:True
				    	icon:'store-outline'
				    	text_color: hex2rgb('#10566B')
    					text: "[b][i][color=#10566B]MARKET[/color][i][b]"

